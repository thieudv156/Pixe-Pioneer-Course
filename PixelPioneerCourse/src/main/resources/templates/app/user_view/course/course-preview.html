<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
    </style>
</head>
<body>
    <div class="mdk-header-layout__content page-content" layout:fragment="contents">
        <div class="mdk-box bg-primary js-mdk-box mb-0"
             data-effects="blend-background">
            <div class="mdk-box__content">
                <div class="hero py-64pt text-center text-sm-left">
                    <div class="container page__container">
                        <h1 class="text-white" th:text="${course.title}">Course name</h1>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-section border-bottom-2">
            <div class="container page__container">
                <div class="page-separator">
                    <div class="page-separator__text">Table of Contents</div>
                </div>
                <div class="row mb-0">
                    <div class="col-lg-7">
                        <div class="accordion js-accordion accordion--boxed mb-24pt" id="parent">
                            <div th:each="lesson : ${lessons}" class="accordion__item">
                                <a href="#" class="accordion__toggle collapsed" data-toggle="collapse" th:data-target="'#course-toc-' + ${lesson.id}" data-parent="#parent">
                                    <span class="btn" th:text="${lesson.orderNumber} + ' - ' + ${lesson.title}" th:onclick="'window.location.href=\'/app/lesson/instructor/view/' + ${lesson.id} + '\''"></span>
                                    <span class="flex"></span>
                                    <span class="accordion__toggle-icon material-icons">keyboard_arrow_down</span>
                                </a>
                                <div class="accordion__menu collapse" th:id="'course-toc-' + ${lesson.id}">
                                    <div th:if="${#lists.isEmpty(lesson.subLessons)}" class="accordion__menu-link">
                                        <i class="material-icons text-70 icon-16pt icon--left">info</i>
                                        <span class="flex">There is no sub-lesson</span>
                                    </div>
                                    <div th:each="subLesson : ${lesson.subLessons}" class="accordion__menu-link">
                                        <i class="material-icons text-70 icon-16pt icon--left">drag_handle</i>
                                        <a class="flex" th:href="@{/app/lesson/instructor/view/{id}(id=${lesson.id})}" th:text="${subLesson.orderNumber} + ' - ' + ${subLesson.title}">Sub-Lesson Detail</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-text text-center justify-content-center">
                            <p class="card-subtitle text-70 mb-12pt"><strong>Enroll to see more contents</strong></p>
                        </div>
                    </div>
                    <div class="col-lg-5 justify-content-center">
                        <div class="card">
                            <div class="card-body py-16pt text-center">
                                <span class="icon-holder icon-holder--outline-secondary rounded-circle d-inline-flex mb-8pt">
                                    <i class="material-icons">account_circle</i>
                                </span>
                                <h4 class="card-title" th:text="${course.instructor.fullName}"><strong>Instructor name</strong></h4>
                                <a class="mb-12pt" style="color: blue;" th:href="@{/app/users/profile/{id}(id=${course.instructor.id})}">
								    Check out for more courses from me
								</a>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body py-16pt text-center">
                                <span class="icon-holder icon-holder--outline-secondary rounded-circle d-inline-flex mb-8pt">
                                    <i class="material-icons">local_library</i>
                                </span>
                                <h4 th:if="${currentProgress==null}" class="card-title"><strong>Enroll Course</strong></h4>
                                <p th:if="${currentProgress==null}" class="card-subtitle text-70 mb-12pt">Get access to all contents in the course</p>
                                <a th:if="${currentProgress==null}" th:href="@{/app/course/{courseId}/start-course(courseId=${course.id})}" class="btn btn-accent mb-8pt">Enroll Now</a>
                                <h4 th:if="${currentProgress!=null}" class="card-title"><strong>Learn Course</strong></h4>
                                <a th:if="${currentProgress!=null}" th:href="@{/app/course/view/{courseId}(courseId=${course.id})}" class="btn btn-accent mb-8pt">Continue Learning</a>
                                <div class="progress" th:if="${currentProgress!=null}">
                                    <div class="progress-bar" role="progressbar" th:style="'width: ' + ${currentProgress} + '%'" th:aria-valuenow="${currentProgress}" aria-valuemin="0" aria-valuemax="100">
                                        <span th:text="${currentProgress} + '%'">0%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-section bg-alt">
            <div class="container page__container">
                <div class="row ">
                    <div class="col-md-12">
                        <div class="page-separator">
                            <div class="page-separator__text">About this course</div>
                        </div>
                        <p class="text-70 description" th:text="${course.description}">Description</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-section bg-alt border-bottom-2">

            <div class="container page__container">
                <div class="page-separator">
                    <div class="page-separator__text">Student Feedback</div>
                </div>
                <div class="row mb-32pt">
                    <div class="col-md-3 mb-32pt mb-md-0">
					    <div class="display-1" th:text="${averageRating}">5.0</div>
					    <div class="rating rating-24" id="star-rating">
					        <!-- Stars will be dynamically inserted here -->
					    </div>
					    <script>
					    document.addEventListener('DOMContentLoaded', function() {
					        const averageRating = [[${averageRating}]]; // Thymeleaf will replace this with the actual value
					        const starContainer = document.getElementById('star-rating');
					        const fullStar = '<span class="rating__item"><span class="material-icons">star</span></span>';
					        const halfStar = '<span class="rating__item"><span class="material-icons">star_half</span></span>';
					        const emptyStar = '<span class="rating__item"><span class="material-icons">star_border</span></span>';
					
					        let stars = '';
					        for (let i = 1; i <= 5; i++) {
					            if (i <= averageRating) {
					                stars += fullStar;
					            } else if (i - averageRating < 1) {
					                stars += halfStar;
					            } else {
					                stars += emptyStar;
					            }
					        }
					        starContainer.innerHTML = stars;
					    });
					</script>
					    <p class="text-muted mb-0" th:text="${#lists.size(reviews)} + ' ratings'">0 ratings</p>
					</div>
                    <div class="col-md-9">
    <!-- 5-star ratings -->
    <div class="row align-items-center mb-8pt" th:attr="data-title=${fiveCount / #lists.size(reviews) * 100} + '% rated 5/5'" data-placement="top">
        <div class="col-md col-sm-6">
            <div class="progress" style="height: 8px;">
                <div class="progress-bar bg-secondary" role="progressbar" th:aria-valuenow="${fiveCount / #lists.size(reviews) * 100}" th:style="'width: ' + (${fiveCount / #lists.size(reviews) * 100}) + '%;'"
					                 aria-valuemin="0"
					                 aria-valuemax="100"></div>
            </div>
        </div>
        <div class="col-md-auto col-sm-6 d-none d-sm-flex align-items-center">
            <div class="rating">
                <span class="rating__item"><span class="material-icons">star</span></span>
                <span th:text="${fiveCount}"></span>
            </div>
        </div>
    </div>

    <!-- 4-star ratings -->
    <div class="row align-items-center mb-8pt" th:attr="data-title=${fourCount / #lists.size(reviews) * 100} + '% rated 4/5'" data-placement="top">
        <div class="col-md col-sm-6">
            <div class="progress" style="height: 8px;">
                <div class="progress-bar bg-secondary" role="progressbar" th:aria-valuenow="${fourCount / #lists.size(reviews) * 100}" th:style="'width: ' + (${fourCount / #lists.size(reviews) * 100}) + '%;'" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>
        <div class="col-md-auto col-sm-6 d-none d-sm-flex align-items-center">
            <div class="rating">
                <span class="rating__item"><span class="material-icons">star</span></span>
                <span th:text="${fourCount}"></span>
            </div>
        </div>
    </div>

    <!-- 3-star ratings -->
    <div class="row align-items-center mb-8pt" th:attr="data-title=${threeCount / #lists.size(reviews) * 100} + '% rated 3/5'" data-placement="top">
        <div class="col-md col-sm-6">
            <div class="progress" style="height: 8px;">
                <div class="progress-bar bg-secondary" role="progressbar" th:aria-valuenow="${threeCount / #lists.size(reviews) * 100}" th:style="'width: ' + (${threeCount / #lists.size(reviews) * 100}) + '%;'" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>
        <div class="col-md-auto col-sm-6 d-none d-sm-flex align-items-center">
            <div class="rating">
                <span class="rating__item"><span class="material-icons">star</span></span>
                <span th:text="${threeCount}"></span>
            </div>
        </div>
    </div>

    <!-- 2-star ratings -->
    <div class="row align-items-center mb-8pt" th:attr="data-title=${twoCount / #lists.size(reviews) * 100} + '% rated 2/5'" data-placement="top">
        <div class="col-md col-sm-6">
            <div class="progress" style="height: 8px;">
                <div class="progress-bar bg-secondary" role="progressbar" th:aria-valuenow="${twoCount / #lists.size(reviews) * 100}" th:style="'width: ' + (${twoCount / #lists.size(reviews) * 100}) + '%;'" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>
        <div class="col-md-auto col-sm-6 d-none d-sm-flex align-items-center">
            <div class="rating">
                <span class="rating__item"><span class="material-icons">star</span></span>
                <span th:text="${twoCount}"></span>
            </div>
        </div>
    </div>

    <!-- 1-star ratings -->
    <div class="row align-items-center mb-8pt" th:attr="data-title=${oneCount / #lists.size(reviews) * 100} + '% rated 1/5'" data-placement="top">
        <div class="col-md col-sm-6">
            <div class="progress" style="height: 8px;">
                <div class="progress-bar bg-secondary" role="progressbar" th:aria-valuenow="${oneCount / #lists.size(reviews) * 100}" th:style="'width: ' + (${oneCount / #lists.size(reviews) * 100}) + '%;'" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>
        <div class="col-md-auto col-sm-6 d-none d-sm-flex align-items-center">
            <div class="rating">
                <span class="rating__item"><span class="material-icons">star</span></span>
                <span th:text="${oneCount}"></span>
            </div>
        </div>
    </div>
</div>
                    
                <div class="pb-16pt mb-16pt border-bottom row">
                    <div class="col-md-3 mb-16pt mb-md-0">
                        <div class="d-flex">
                            <a href="student-profile.html"
                               class="avatar avatar-sm mr-12pt">
                                <!-- <img src="LB" alt="avatar" class="avatar-img rounded-circle"> -->
                                <span class="avatar-title rounded-circle">LB</span>
                            </a>
                            <div class="flex">
                                <p class="small text-muted m-0">2 days ago</p>
                                <a href="student-profile.html"
                                   class="card-title">Laza Bogdan</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <div class="rating mb-8pt">
                            <span class="rating__item"><span class="material-icons">star</span></span>
                            <span class="rating__item"><span class="material-icons">star</span></span>
                            <span class="rating__item"><span class="material-icons">star</span></span>
                            <span class="rating__item"><span class="material-icons">star</span></span>
                            <span class="rating__item"><span class="material-icons">star_border</span></span>
                        </div>
                        <p class="text-70 mb-0">A wonderful course on how to start. Eddie beautifully conveys all essentials of a becoming a good Angular developer. Very glad to have taken this course. Thank you Eddie Bryan.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>